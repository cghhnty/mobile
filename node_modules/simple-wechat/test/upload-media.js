var conf = require('./config');
var wechat = require('../simple-wechat');

var accessToken = {
	get: function(cb) {cb();},

	set: function(token) {console.log(token.token);},

	lock: function(cb) {cb();}
};

var api = new wechat.Api(conf.appId, conf.appSecret, accessToken);
api.uploadMedia('test.jpg', 'image', function(err, result) {
	console.log('upload test.jpg');
	console.log('error:', err);
	console.log('result:', result);

	// 并发请求会刷新access_token
	api.uploadMedia('http://www.baidu.com/img/bdlogo.png', 'image', function(err, result) {
		console.log('upload remote image');
		console.log('error:', err);
		console.log('result:', result);
	});
});
